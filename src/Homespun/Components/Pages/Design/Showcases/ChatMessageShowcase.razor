@using Homespun.Features.ClaudeCode.Data
@using Homespun.Components.Shared.Chat

<div class="showcase-section">
    <h3>User Message</h3>
    <div class="showcase-item">
        <div class="showcase-label">Message from the user</div>
        <div class="showcase-preview">
            <ChatMessage Message="@_userMessage" />
        </div>
    </div>
</div>

<div class="showcase-section">
    <h3>Assistant Text Message</h3>
    <div class="showcase-item">
        <div class="showcase-label">Simple text response from Claude</div>
        <div class="showcase-preview">
            <ChatMessage Message="@_assistantTextMessage" />
        </div>
    </div>
</div>

<div class="showcase-section">
    <h3>Message with Tool Use</h3>
    <div class="showcase-item">
        <div class="showcase-label">Claude invoking a tool</div>
        <div class="showcase-preview">
            <ChatMessage Message="@_toolUseMessage" />
        </div>
    </div>
</div>

<div class="showcase-section">
    <h3>Message with Tool Result</h3>
    <div class="showcase-item">
        <div class="showcase-label">Result from a tool invocation</div>
        <div class="showcase-preview">
            <ChatMessage Message="@_toolResultMessage" />
        </div>
    </div>
</div>

<div class="showcase-section">
    <h3>Message with Thinking</h3>
    <div class="showcase-item">
        <div class="showcase-label">Claude's thinking process</div>
        <div class="showcase-preview">
            <ChatMessage Message="@_thinkingMessage" />
        </div>
    </div>
</div>

<div class="showcase-section">
    <h3>Conversation Flow</h3>
    <div class="showcase-item">
        <div class="showcase-label">Multiple messages in sequence</div>
        <div class="showcase-preview">
            <ChatMessage Message="@_conversationUser" />
            <ChatMessage Message="@_conversationAssistant" />
        </div>
    </div>
</div>

@code {
    private ClaudeMessage _userMessage = new()
    {
        SessionId = "demo",
        Role = ClaudeMessageRole.User,
        Content = new()
        {
            new ClaudeMessageContent
            {
                Type = ClaudeContentType.Text,
                Text = "Can you help me implement a login form with email and password validation?"
            }
        },
        CreatedAt = DateTime.UtcNow.AddMinutes(-5)
    };

    private ClaudeMessage _assistantTextMessage = new()
    {
        SessionId = "demo",
        Role = ClaudeMessageRole.Assistant,
        Content = new()
        {
            new ClaudeMessageContent
            {
                Type = ClaudeContentType.Text,
                Text = "I'd be happy to help you implement a login form! Let me create a form component with proper email and password validation.\n\nHere's what I'll include:\n- Email format validation\n- Password minimum length check\n- Error message display\n- Submit handling"
            }
        },
        CreatedAt = DateTime.UtcNow.AddMinutes(-4)
    };

    private ClaudeMessage _toolUseMessage = new()
    {
        SessionId = "demo",
        Role = ClaudeMessageRole.Assistant,
        Content = new()
        {
            new ClaudeMessageContent
            {
                Type = ClaudeContentType.Text,
                Text = "Let me read the existing authentication service to understand the API:"
            },
            new ClaudeMessageContent
            {
                Type = ClaudeContentType.ToolUse,
                ToolName = "Read",
                ToolInput = """{"file_path": "/src/services/auth.ts"}""",
                ToolUseId = "tool_01"
            }
        },
        CreatedAt = DateTime.UtcNow.AddMinutes(-3)
    };

    private ClaudeMessage _toolResultMessage = new()
    {
        SessionId = "demo",
        Role = ClaudeMessageRole.User,
        Content = new()
        {
            new ClaudeMessageContent
            {
                Type = ClaudeContentType.ToolResult,
                ToolUseId = "tool_01",
                ToolResult = "export const login = async (email: string, password: string) => {\n  const response = await fetch('/api/auth/login', {\n    method: 'POST',\n    body: JSON.stringify({ email, password })\n  });\n  return response.json();\n};",
                ToolSuccess = true
            }
        },
        CreatedAt = DateTime.UtcNow.AddMinutes(-2)
    };

    private ClaudeMessage _thinkingMessage = new()
    {
        SessionId = "demo",
        Role = ClaudeMessageRole.Assistant,
        Content = new()
        {
            new ClaudeMessageContent
            {
                Type = ClaudeContentType.Thinking,
                Thinking = "Looking at the existing auth service, I can see it expects email and password parameters. I should create a form that validates the email format using a regex pattern and ensures the password meets minimum length requirements before calling the login function."
            },
            new ClaudeMessageContent
            {
                Type = ClaudeContentType.Text,
                Text = "I've analyzed the authentication service and I'll now create the login form component."
            }
        },
        CreatedAt = DateTime.UtcNow.AddMinutes(-1)
    };

    private ClaudeMessage _conversationUser = new()
    {
        SessionId = "demo",
        Role = ClaudeMessageRole.User,
        Content = new()
        {
            new ClaudeMessageContent
            {
                Type = ClaudeContentType.Text,
                Text = "Add a \"Remember me\" checkbox to the login form"
            }
        },
        CreatedAt = DateTime.UtcNow.AddSeconds(-30)
    };

    private ClaudeMessage _conversationAssistant = new()
    {
        SessionId = "demo",
        Role = ClaudeMessageRole.Assistant,
        Content = new()
        {
            new ClaudeMessageContent
            {
                Type = ClaudeContentType.Text,
                Text = "I'll add a \"Remember me\" checkbox that stores the user's preference in local storage. This will keep the user logged in across browser sessions."
            }
        },
        CreatedAt = DateTime.UtcNow
    };
}
