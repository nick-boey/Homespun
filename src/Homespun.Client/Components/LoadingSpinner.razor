@*
    LoadingSpinner Component

    A reusable loading spinner with size variants and optional label.
    Wraps BbSpinner from Blazor Blueprint.

    Usage:
        <LoadingSpinner />                              - Medium spinner, no label
        <LoadingSpinner Size="LoadingSpinnerSize.Sm" />        - Small spinner
        <LoadingSpinner Size="LoadingSpinnerSize.Lg" />        - Large spinner
        <LoadingSpinner Label="Loading..." />           - With label text
        <LoadingSpinner Label="Loading" Inline="true"/> - Inline with button text
*@

<div class="@GetContainerClass()" role="status">
    <BbSpinner Size="@GetBlueprintSize()" />
    @if (!string.IsNullOrEmpty(Label))
    {
        <span class="@GetLabelClass()">@Label</span>
    }
    @if (!string.IsNullOrEmpty(ScreenReaderText))
    {
        <span class="sr-only">@ScreenReaderText</span>
    }
</div>

@code {
    /// <summary>
    /// Size of the spinner: Sm (small), Md (medium/default), Lg (large)
    /// </summary>
    [Parameter]
    public LoadingSpinnerSize Size { get; set; } = LoadingSpinnerSize.Md;

    /// <summary>
    /// Optional label text displayed next to the spinner
    /// </summary>
    [Parameter]
    public string? Label { get; set; }

    /// <summary>
    /// Text for screen readers (defaults to Label or "Loading...")
    /// </summary>
    [Parameter]
    public string? ScreenReaderText { get; set; }

    /// <summary>
    /// When true, uses inline-flex for use within buttons or inline contexts
    /// </summary>
    [Parameter]
    public bool Inline { get; set; }

    /// <summary>
    /// When true, centers the spinner in its container
    /// </summary>
    [Parameter]
    public bool Centered { get; set; }

    /// <summary>
    /// Additional CSS classes to apply to the container
    /// </summary>
    [Parameter]
    public string? Class { get; set; }

    private string GetContainerClass()
    {
        var classes = new List<string> { "loading-spinner" };

        if (Inline)
            classes.Add("loading-spinner-inline");
        else
            classes.Add("loading-spinner-block");

        if (Centered)
            classes.Add("loading-spinner-centered");

        if (!string.IsNullOrEmpty(Class))
            classes.Add(Class);

        return string.Join(" ", classes);
    }

    private SpinnerSize GetBlueprintSize()
    {
        return Size switch
        {
            LoadingSpinnerSize.Sm => SpinnerSize.Small,
            LoadingSpinnerSize.Lg => SpinnerSize.Large,
            _ => SpinnerSize.Default
        };
    }

    private string GetLabelClass()
    {
        return Size switch
        {
            LoadingSpinnerSize.Sm => "loading-spinner-label loading-spinner-label-sm",
            LoadingSpinnerSize.Lg => "loading-spinner-label loading-spinner-label-lg",
            _ => "loading-spinner-label"
        };
    }
}
