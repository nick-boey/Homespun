# Komodo Resource Sync - Homespun Stack
#
# This file declares the Homespun application stack for Komodo management.
# Komodo's Resource Sync feature reads this TOML to register, deploy, and
# auto-update the stack when newer images are pushed to GHCR.
#
# Setup:
#   1. Ensure .env.compose exists (generated by scripts/run.sh)
#   2. Create a Resource Sync in Komodo UI pointing to this file
#   3. Run "Sync" to import the stack, then "Deploy" from the Stack page
#
# Prerequisites:
#   - Komodo installed and running (scripts/install-komodo.sh + scripts/run-komodo.sh)
#   - run.sh executed at least once to generate .env.compose with credentials
#   - Periphery has GHCR auth mounted at /etc/komodo/docker

[[stack]]
name = "homespun"
description = "Homespun - Blazor web app for managing development features and AI agents"
tags = ["homespun"]

[stack.config]
server_id = "Local"
run_directory = "/home/azureuser/repos/Homespun"
files_on_host = true
file_paths = ["docker-compose.yml"]
env_file_path = ".env.compose"
auto_update = true
poll_for_updates = true
